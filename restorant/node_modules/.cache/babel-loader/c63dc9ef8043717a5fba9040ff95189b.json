{"ast":null,"code":"import { LOGIN } from \"../Constant\";\nimport { useDispatch } from \"react-redux\";\nexport const login = data => {\n  return dispatch => {\n    dispatch(fetchProductsBegin());\n    return fetch('http://localhost:8000/token-auth/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(handleErrors).then(res => res.json()).then(json => {\n      dispatch(fetchProductsSuccess(json.token));\n      return json.token;\n    }).catch(error => dispatch(fetchProductsFailure(error)));\n  };\n}; // Handle HTTP errors since fetch won't.\n\nfunction handleErrors(response) {\n  if (!response.ok) {\n    throw Error(response.statusText);\n  }\n\n  return response;\n}","map":{"version":3,"sources":["/home/rails/learning/react/Restorent-Django-React-Redux/Django-React/restorant/src/Services/Action/action.js"],"names":["LOGIN","useDispatch","login","data","dispatch","fetchProductsBegin","fetch","method","headers","body","JSON","stringify","then","handleErrors","res","json","fetchProductsSuccess","token","catch","error","fetchProductsFailure","response","ok","Error","statusText"],"mappings":"AAAA,SAASA,KAAT,QAAsB,aAAtB;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAO,MAAMC,KAAK,GAAIC,IAAD,IAAU;AAC3B,SAAOC,QAAQ,IAAI;AACfA,IAAAA,QAAQ,CAACC,kBAAkB,EAAnB,CAAR;AACA,WAAOC,KAAK,CAAC,mCAAD,EAAsC;AAChDC,MAAAA,MAAM,EAAE,MADwC;AAEhDC,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX,OAFuC;AAKhDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,IAAf;AAL0C,KAAtC,CAAL,CAMNS,IANM,CAMDC,YANC,EAOJD,IAPI,CAOCE,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAPR,EAQJH,IARI,CAQCG,IAAI,IAAI;AACZX,MAAAA,QAAQ,CAACY,oBAAoB,CAACD,IAAI,CAACE,KAAN,CAArB,CAAR;AACA,aAAOF,IAAI,CAACE,KAAZ;AACD,KAXI,EAYJC,KAZI,CAYEC,KAAK,IAAIf,QAAQ,CAACgB,oBAAoB,CAACD,KAAD,CAArB,CAZnB,CAAP;AAaD,GAfH;AAgBC,CAjBE,C,CAmBL;;AACA,SAASN,YAAT,CAAsBQ,QAAtB,EAAgC;AAC9B,MAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AAChB,UAAMC,KAAK,CAACF,QAAQ,CAACG,UAAV,CAAX;AACD;;AACD,SAAOH,QAAP;AACD","sourcesContent":["import { LOGIN } from \"../Constant\";\nimport { useDispatch } from \"react-redux\";\n\nexport const login = (data) => {\n    return dispatch => {\n        dispatch(fetchProductsBegin());\n        return fetch('http://localhost:8000/token-auth/', {\n          method: 'POST',\n          headers: {\n              'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(data)\n      }).then(handleErrors)\n          .then(res => res.json())\n          .then(json => {\n            dispatch(fetchProductsSuccess(json.token));\n            return json.token;\n          })\n          .catch(error => dispatch(fetchProductsFailure(error)));\n      };\n    }\n  \n  // Handle HTTP errors since fetch won't.\n  function handleErrors(response) {\n    if (!response.ok) {\n      throw Error(response.statusText);\n    }\n    return response;\n  }\n\n\n\n"]},"metadata":{},"sourceType":"module"}